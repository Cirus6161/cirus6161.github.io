!function(s){function a(n,e){n=n||this.$pnls.children("."+o.panel+"_opened");var t=s(),a=this.$menu.children("."+o.mm("navbars_top")+", ."+o.mm("navbars_bottom")).children("."+o.navbar);a.find(l).filter(":focus").length||("default"==e&&((t=n.children("."+o.listview).find("a[href]").not("."+o.hidden)).length||(t=n.find(l).not("."+o.hidden)),t.length||(t=a.find(l).not("."+o.hidden))),t.length||(t=this.$menu.children("."+o.tabstart)),t.first().focus())}var o,d,i,r,c="mmenu",f="keyboardNavigation";s[c].addons[f]={setup:function(){if(!s[c].support.touch){var e=this.opts[f];this.conf[f];if(r=s[c].glbl,"boolean"!=typeof e&&"string"!=typeof e||(e={enable:e}),"object"!=typeof e&&(e={}),(e=this.opts[f]=s.extend(!0,{},s[c].defaults[f],e)).enable){var n=s('<button class="'+o.tabstart+'" tabindex="0" type="button" />'),t=s('<button class="'+o.tabend+'" tabindex="0" type="button" />');this.bind("initMenu:after",function(){e.enhance&&this.$menu.addClass(o.menu+"_keyboardfocus"),this["_initWindow_"+f](e.enhance)}),this.bind("initOpened:before",function(){this.$menu.prepend(n).append(t).children("."+o.mm("navbars-top")+", ."+o.mm("navbars-bottom")).children("."+o.navbar).children("a."+o.title).attr("tabindex",-1)}),this.bind("open:finish",function(){a.call(this,null,e.enable)}),this.bind("openPanel:finish",function(n){a.call(this,n,e.enable)}),this.bind("initOpened:after:sr-aria",function(){var n=this.$menu.children("."+o.tabstart+", ."+o.tabend);this.__sr_aria(n,"hidden",!0),this.__sr_role(n,"presentation")})}}},add:function(){o=s[c]._c,d=s[c]._d,i=s[c]._e,o.add("tabstart tabend"),i.add("focusin keydown")},clickAnchor:function(n,e){}},s[c].defaults[f]={enable:!1,enhance:!1},s[c].configuration[f]={},s[c].prototype["_initWindow_"+f]=function(n){r.$wndw.off(i.keydown+"-offCanvas"),r.$wndw.off(i.focusin+"-"+f).on(i.focusin+"-"+f,function(n){if(r.$html.hasClass(o.wrapper+"_opened")){var e=s(n.target);e.is("."+o.tabend)&&e.parent().find("."+o.tabstart).focus()}}),r.$wndw.off(i.keydown+"-"+f).on(i.keydown+"-"+f,function(n){var e=s(n.target),t=e.closest("."+o.menu);if(t.length){t.data("mmenu");if(e.is("input, textarea"));else switch(n.keyCode){case 13:(e.is(".mm-toggle")||e.is(".mm-check"))&&e.trigger(i.click);break;case 32:case 37:case 38:case 39:case 40:n.preventDefault()}}}),n&&r.$wndw.off(i.keydown+"-"+f).on(i.keydown+"-"+f,function(n){var e=s(n.target),t=e.closest("."+o.menu);if(t.length){var a=t.data("mmenu");if(e.is("input"))switch(n.keyCode){case 27:e.val("")}else switch(n.keyCode){case 8:var i=t.find("."+o.panel+"_opened").data(d.parent);i&&i.length&&a.openPanel(i.closest("."+o.panel));break;case 27:t.hasClass(o.menu+"_offcanvas")&&a.close()}}})};var l="input, select, textarea, button, label, a[href]"}(jQuery);